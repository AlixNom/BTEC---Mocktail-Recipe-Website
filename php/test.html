<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic JSON Management</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .item { margin-bottom: 10px; }
        .item input { margin-right: 10px; }
    </style>
</head>
<body>
    <h2>Dynamic JSON Management</h2>
    
    <div id="data-container">
        <!-- Dynamic data will be appended here -->
    </div>
    
    <button id="add-btn">Add</button>
    <button id="save-btn">Save</button>

    <script>
        $(document).ready(function(){
            let count = 0;
            
            // Add new input field
            $('#add-btn').on('click', function() {
                count++;
                $('#data-container').append(
                    `<div class="item" id="item-${count}">
                        <input type="text" id="input-${count}" placeholder="Enter data">
                        <button type="button" onclick="editItem(${count})">Edit</button>
                        <button type="button" onclick="removeItem(${count})">Remove</button>
                    </div>`
                );
            });

            // Save all input data
            $('#save-btn').on('click', function() {
                let data = [];
                $('#data-container .item').each(function() {
                    let id = $(this).attr('id').split('-')[1];
                    let value = $(`#input-${id}`).val();
                    if (value) {
                        data.push(value);
                    }
                });

                $.ajax({
                    url: 'process.php',
                    type: 'POST',
                    data: { action: 'save', data: JSON.stringify(data) },
                    success: function(response) {
                        alert('Data saved successfully');
                        console.log('Saved Data:', response);
                    }
                });
            });
        });

        // Edit item
        function editItem(id) {
            let input = $(`#input-${id}`);
            input.prop('disabled', false);
            input.focus();
        }

        // Remove item
        function removeItem(id) {
            $(`#item-${id}`).remove();
        }
    </script>
</body>
</html>